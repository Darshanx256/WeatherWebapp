(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))d(l);new MutationObserver(l=>{for(const n of l)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&d(i)}).observe(document,{childList:!0,subtree:!0});function y(l){const n={};return l.integrity&&(n.integrity=l.integrity),l.referrerPolicy&&(n.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?n.credentials="include":l.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function d(l){if(l.ep)return;l.ep=!0;const n=y(l);fetch(l.href,n)}})();document.addEventListener("DOMContentLoaded",function(){const p=document.getElementById("searchInput"),s=document.getElementById("suggestionContainer"),y=document.getElementById("searchButton");let d=0;p.addEventListener("input",function(){const n=this.value.trim().toLowerCase();if(s.innerHTML="",n.length===0){s.style.display="none",d=0;return}const i=new Set;cityData.values.forEach(u=>{u.toLowerCase().startsWith(n)&&i.add(u)});const g=Array.from(i).slice(0,4);if(g.length===0){s.style.display="none",d=-1,document.body.classList.remove("suggestion-open");return}g.forEach((u,w)=>{const h=document.createElement("div");h.textContent=u,h.classList.add("suggestion"),h.addEventListener("click",function(){p.value=u,s.innerHTML="",s.style.display="none",d=-1}),w===d&&h.classList.add("selected"),s.appendChild(h)});const E=p.getBoundingClientRect();s.style.top=E.bottom+window.scrollY+"px",s.style.left=E.left+"px",s.style.width=p.offsetWidth+"px",s.style.display="block"}),p.addEventListener("keydown",function(n){const i=document.querySelectorAll(".suggestion");n.key==="ArrowDown"?(d=Math.min(d+1,i.length-1),l(i)):n.key==="ArrowUp"?(d=Math.max(d-1,-1),l(i)):n.key==="Enter"&&d!==-1?(p.value=i[d].textContent,s.innerHTML="",s.style.display="none",d=-1,y.click()):n.key=="Enter"&&y.click()});function l(n){n.forEach((i,g)=>{g===d?i.classList.add("selected"):i.classList.remove("selected")})}document.addEventListener("click",function(n){!s.contains(n.target)&&n.target!==p&&(s.style.display="none",d=-1)})});console.log({VITE_GEOAPIFY:"2cdf21140e974ba8af8fae8dab9bbbb1",VITE_VISUALCROSSING:"VVM776YWTQ5FJNRX9YRBXLF78",VITE_DISTANCEMATRIX:"6mvxaDxNfMOP5XXheg2F9G59AA0rfq1xxFMsYxmBNdhj1VRh017YZgdvJ2KR0LRB",VITE_OPENWEATHERMAP:"5a088485f78a08fadae18627eec5a98f",VITE_DISTANCEMATRIX_COORDS:"oPRZQuv6wqP1R6IfxUTONtm1lYXB4Ob0W1kH5HHQKX9w9m8u42i39OkyZiujLRMC",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1});const ee="5a088485f78a08fadae18627eec5a98f",te="2cdf21140e974ba8af8fae8dab9bbbb1",ne=Object.freeze(Object.defineProperty({__proto__:null,GEOAPIFY_KEY:te,OPENWEATHERMAP_KEY:ee},Symbol.toStringTag,{value:"Module"})),oe="modulepreload",re=function(p,s){return new URL(p,s).href},W={},ie=function(s,y,d){if(!y||y.length===0)return s();const l=document.getElementsByTagName("link");return Promise.all(y.map(n=>{if(n=re(n,d),n in W)return;W[n]=!0;const i=n.endsWith(".css"),g=i?'[rel="stylesheet"]':"";if(!!d)for(let w=l.length-1;w>=0;w--){const h=l[w];if(h.href===n&&(!i||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${g}`))return;const u=document.createElement("link");if(u.rel=i?"stylesheet":oe,i||(u.as="script",u.crossOrigin=""),u.href=n,document.head.appendChild(u),i)return new Promise((w,h)=>{u.addEventListener("load",w),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>s()).catch(n=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=n,window.dispatchEvent(i),!i.defaultPrevented)throw n})};let x=null,F=null;document.addEventListener("DOMContentLoaded",async()=>{try{const e=await ie(()=>Promise.resolve().then(()=>ne),void 0,import.meta.url);x=e.OPENWEATHERMAP_KEY,F=e.GEOAPIFY_KEY}catch(e){console.log("Error importing API key: ",e)}const p="https://api.openweathermap.org/data/2.5/weather?units=metric",s=document.getElementById("searchInput"),y=document.getElementById("searchButton"),d=document.getElementById("distancecalculator"),l=document.getElementById("gps");var n=document.getElementById("distance-popup");const i=document.getElementById("minimap");var g=document.getElementById("no-network-popup"),E=document.getElementById("loading-popup");let u;y.addEventListener("click",function(){const e=s.value.trim();e&&D(e)}),l.addEventListener("click",function(){M()}),d.addEventListener("click",function(){n.innerHTML="",populateDynamicContent();var e=document.createElement("script");e.src="modules/distance/dist.js",document.body.appendChild(e),n.style.display="block",window.scrollBy(0,500)});function w(e,t){let o=JSON.parse(localStorage.getItem("searchHistory"))||[];const r=o.findIndex(c=>c.query===e);r!==-1&&o.splice(r,1);const a=30;o.length>=a&&o.shift(),o.push({query:e,temperature:t}),localStorage.setItem("searchHistory",JSON.stringify(o))}function h(){console.log("showSearchHistory function called");const e=JSON.parse(localStorage.getItem("searchHistory"))||[],t=document.getElementById("historyTableBody");if(t.innerHTML="",e.length===0){const r=document.createElement("tr");r.innerHTML="<td >NO HISTORY</td>",t.appendChild(r)}else for(let r=e.length-1;r>=0;r--){const a=e[r],c=document.createElement("tr");c.innerHTML=`
                    <td>${a.query}</td>
                    <td>${a.temperature}°C</td>
                    <td>
                        <button class="delete-btn" data-index="${r}">x</button>
                        <button class="hist-load" data-index="${r}">LOAD NOW</button>
                    </td>
                `,t.appendChild(c)}const o=document.getElementById("history");o.classList.add("show"),console.log("Search history visibility toggled:",o.classList.contains("show"))}function U(e){let t=JSON.parse(localStorage.getItem("searchHistory"))||[];t.splice(e,1),localStorage.setItem("searchHistory",JSON.stringify(t)),h()}function Y(e){let t=JSON.parse(localStorage.getItem("searchHistory"))||[];console.log(t[e].query),P(),s.value=t[e].query,y.click()}document.getElementById("history-btn").addEventListener("click",function(){console.log("History button clicked"),h()}),document.getElementById("historyTableBody").addEventListener("click",function(e){if(e.target.classList.contains("delete-btn")){const t=e.target.dataset.index;U(t)}if(e.target.classList.contains("hist-load")){const t=e.target.dataset.index;Y(t)}});function P(){document.getElementById("history").classList.remove("show")}document.getElementById("closeHistoryBtn").addEventListener("click",function(){P()});function M(e){console.log("Attempting to get GPS location..."),navigator.geolocation?navigator.geolocation.getCurrentPosition(async function(t){console.log("GPS location acquired successfully.");const o=t.coords.latitude,r=t.coords.longitude;try{const a=`https://api.openweathermap.org/data/2.5/weather?lat=${o}&lon=${r}&appid=${x}`,c=await fetch(a);if(c.ok){const m=(await c.json()).name;console.log("City Name:",m),D(m),E.style.display="none"}else console.error("Error fetching weather data:",c.statusText),g.style.display="block",E.style.display="none"}catch(a){console.error("Error fetching weather data:",a),g.style.display="block",E.style.display="none"}},function(t){console.error("Error getting current position:",t),g.style.display="block",E.style.display="none"}):console.error("Geolocation is not supported by this browser.")}E.style.display="block",M();function V(e,t){const o="https://maps.geoapify.com/v1/staticmap",r=new URLSearchParams({style:"osm-bright",width:420,height:230,center:`lonlat:${t},${e}`,zoom:8,apiKey:F,marker:`lonlat:${t},${e};color:red;size:medium`}),a=`${o}?${r}`;return console.log(a),a}async function D(e){try{const t=await fetch(`${p}&appid=${x}&q=${e}`);t.ok||(g.style.display="block");const o=await t.json();console.log(o),K(o),w(C(o.name),o.main.temp)}catch(t){console.log(t)}}function K(e){u&&clearInterval(u,e.weather[0].main),i.src="",Q(e.name),mapAddr=V(e.coord.lat,e.coord.lon),i.src=mapAddr,console.log(e.timezone);const t=document.querySelector(".weather-icon");t.src=`http://openweathermap.org/img/w/${e.weather[0].icon}.png`,t.alt=e.weather[0].main,u=setInterval(function(){j(e.timezone,e.weather[0].main)},1e3),document.querySelector(".city").textContent=C(e.name),document.querySelector(".temp").textContent=e.main.temp+" °C",document.querySelector(".humidity").textContent=e.main.humidity+"%",document.querySelector(".wind").textContent=e.wind.speed+" km/h",document.querySelector(".max").textContent=e.main.temp_max+" °C",document.querySelector(".min").textContent=e.main.temp_min+" °C",document.querySelector(".weather-icon").textContent=e.weather[0].main,document.querySelector(".pressure").textContent=e.main.pressure+" hPa",document.querySelector(".visibility").textContent=e.visibility+" km",e.main.sea_level!==void 0&&(document.querySelector(".sea-level").textContent=e.main.sea_level+" m"),document.querySelector(".new-weather").textContent=C(e.weather[0].description),document.querySelector(".country").textContent=C(e.sys.country)}function C(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function j(e,t){const o=new Date,r=e*1e3,a=new Date(o.getTime()+r),f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][a.getUTCDay()];let m=a.getUTCHours(),S=a.getUTCMinutes(),L="";m>=5&&m<12?L="Morning":m>=12&&m<17?L="Afternoon":m>=17&&m<21?L="Evening":L="Night";let B=m>=12?"PM":"AM";m=m%12||12,S=S<10?"0"+S:S;const H=document.getElementById("time"),v=document.getElementById("date");H.textContent=`${m}:${S} ${B}`,v.textContent=`${f} - ${a.toLocaleDateString()}`,document.getElementById("timeOfDay").textContent=`${L}`}var $=document.getElementById("weatherForecast"),I=document.getElementById("weatherForecastWrapper"),T=document.getElementById("loadingIndicator"),b=null,k=0,A=40;function _(){if(!(!b||!b.list)){var e=G(b.list.slice(k,k+A));e.forEach(function(t,o,r){var a=X(o,t,r);$.appendChild(a)}),T.style.display="none"}}function G(e){var t=new Map;return e.forEach(function(o,r){var a=new Date(o.dt*1e3).toLocaleDateString();t.has(a)||t.set(a,[]),t.get(a).push(o)}),t}function X(e,t,o){var r=document.createElement("table");r.classList.add("weather-table");var a=document.createElement("caption");return a.textContent=Z(e,o),r.appendChild(a),t.forEach(function(c){var f=r.insertRow(),m=f.insertCell(),S=f.insertCell(),L=f.insertCell(),B=new Date(c.dt*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});m.textContent=B;var H=c.main.temp+"°C";S.textContent=H;var v=document.createElement("img");c.weather&&c.weather.length>0&&c.weather[0].icon?(v.src="https://openweathermap.org/img/wn/"+c.weather[0].icon+".png",v.alt="Weather Icon",v.title=c.weather[0].description):(v.src="placeholder.png",v.alt="Placeholder Icon"),v.classList.add("weather-icon"),L.appendChild(v);var R=document.createElement("span");R.textContent=c.weather[0].description,L.appendChild(R),f.addEventListener("click",function(){if(f.nextElementSibling&&f.nextElementSibling.classList.contains("weather-details"))f.nextElementSibling.classList.toggle("show"),f.nextElementSibling.classList.toggle("active");else{var q=r.insertRow(f.rowIndex+1);q.classList.add("weather-details","show","active");var N=q.insertCell();N.colSpan=3;var O=document.createElement("div");O.classList.add("weather-details-content"),O.innerHTML=`
                        <div style="display: flex; justify-content: space-between;">
                            <div style="flex: 1;">
                                <p><i class="fas fa-tint"></i> Humidity: ${c.main.humidity}%</p>
                                <p><i class="fas fa-wind"></i> Wind Speed: ${c.wind.speed} m/s</p>
                                <p><i class="fas fa-tachometer-alt"></i> Pressure: ${c.main.pressure} hPa</p>
                            </div>
                            <div style="flex: 1;">
                                <p><i class="fas fa-thermometer-half"></i> Feels Like: ${c.main.feels_like}°C</p>
                                <p><i class="fas fa-thermometer-full"></i> Max Temp: ${c.main.temp_max}°C</p>
                                <p><i class="fas fa-thermometer-empty"></i> Min Temp: ${c.main.temp_min}°C</p>
                            </div>
                        </div>
                    `,N.appendChild(O)}})}),r}function z(){k+=A,_()}function J(){I.scrollHeight-I.scrollTop===I.clientHeight&&(T.style.display="block",z())}I.addEventListener("scroll",J);function Q(e){$.innerHTML="",T.style.display="block";var t=`https://api.openweathermap.org/data/2.5/forecast?appid=${x}&units=metric&q=`+e;fetch(t).then(o=>o.json()).then(o=>{console.log(o),b=o,_()}).catch(o=>console.error("Error fetching weather data:",o))}function Z(e,t){if(t===0)return"Today - "+e;if(t===1)return"Tomorrow - "+e;if(t===2)return"Day after Tomorrow - "+e;var o={weekday:"long",year:"numeric",month:"long",day:"numeric"},r=new Date(e);return r.toLocaleDateString("en-US",o)}});
