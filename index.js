(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))y(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&y(c)}).observe(document,{childList:!0,subtree:!0});function w(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function y(s){if(s.ep)return;s.ep=!0;const r=w(s);fetch(s.href,r)}})();console.log({VITE_GEOAPIFY:"2cdf21140e974ba8af8fae8dab9bbbb1",VITE_VISUALCROSSING:"VVM776YWTQ5FJNRX9YRBXLF78",VITE_DISTANCEMATRIX:"6mvxaDxNfMOP5XXheg2F9G59AA0rfq1xxFMsYxmBNdhj1VRh017YZgdvJ2KR0LRB",VITE_OPENWEATHERMAP:"5a088485f78a08fadae18627eec5a98f",VITE_DISTANCEMATRIX_COORDS:"oPRZQuv6wqP1R6IfxUTONtm1lYXB4Ob0W1kH5HHQKX9w9m8u42i39OkyZiujLRMC",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1});const ee="5a088485f78a08fadae18627eec5a98f",te="2cdf21140e974ba8af8fae8dab9bbbb1",ne=Object.freeze(Object.defineProperty({__proto__:null,GEOAPIFY_KEY:te,OPENWEATHERMAP_KEY:ee},Symbol.toStringTag,{value:"Module"})),oe="modulepreload",re=function(f,u){return new URL(f,u).href},W={},ie=function(u,w,y){if(!w||w.length===0)return u();const s=document.getElementsByTagName("link");return Promise.all(w.map(r=>{if(r=re(r,y),r in W)return;W[r]=!0;const c=r.endsWith(".css"),S=c?'[rel="stylesheet"]':"";if(!!y)for(let p=s.length-1;p>=0;p--){const g=s[p];if(g.href===r&&(!c||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${S}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":oe,c||(d.as="script",d.crossOrigin=""),d.href=r,document.head.appendChild(d),c)return new Promise((p,g)=>{d.addEventListener("load",p),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>u()).catch(r=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=r,window.dispatchEvent(c),!c.defaultPrevented)throw r})};document.addEventListener("DOMContentLoaded",async()=>{let f="5a088485f78a08fadae18627eec5a98f",u="2cdf21140e974ba8af8fae8dab9bbbb1";try{const e=await ie(()=>Promise.resolve().then(()=>ne),void 0,import.meta.url);f=e.OPENWEATHERMAP_KEY,u=e.GEOAPIFY_KEY}catch(e){console.log("Error importing API key: ",e)}const w="https://api.openweathermap.org/data/2.5/weather?units=metric",y=document.getElementById("searchInput"),s=document.getElementById("searchButton"),r=document.getElementById("distancecalculator"),c=document.getElementById("gps");var S=document.getElementById("distance-popup");const L=document.getElementById("minimap");var d=document.getElementById("no-network-popup"),p=document.getElementById("loading-popup");let g;s.addEventListener("click",function(){const e=y.value.trim();e&&_(e)}),c.addEventListener("click",function(){$()}),r.addEventListener("click",function(){S.innerHTML="",populateDynamicContent();var e=document.createElement("script");e.src="modules/distance/dist.js",document.body.appendChild(e),S.style.display="block",window.scrollBy(0,500)});function F(e,t){let n=JSON.parse(localStorage.getItem("searchHistory"))||[];const o=n.findIndex(a=>a.query===e);o!==-1&&n.splice(o,1);const i=30;n.length>=i&&n.shift(),n.push({query:e,temperature:t}),localStorage.setItem("searchHistory",JSON.stringify(n))}function B(){console.log("showSearchHistory function called");const e=JSON.parse(localStorage.getItem("searchHistory"))||[],t=document.getElementById("historyTableBody");if(t.innerHTML="",e.length===0){const o=document.createElement("tr");o.innerHTML="<td >NO HISTORY</td>",t.appendChild(o)}else for(let o=e.length-1;o>=0;o--){const i=e[o],a=document.createElement("tr");a.innerHTML=`
                    <td>${i.query}</td>
                    <td>${i.temperature}°C</td>
                    <td>
                        <button class="delete-btn" data-index="${o}">x</button>
                        <button class="hist-load" data-index="${o}">LOAD NOW</button>
                    </td>
                `,t.appendChild(a)}const n=document.getElementById("history");n.classList.add("show"),console.log("Search history visibility toggled:",n.classList.contains("show"))}function U(e){let t=JSON.parse(localStorage.getItem("searchHistory"))||[];t.splice(e,1),localStorage.setItem("searchHistory",JSON.stringify(t)),B()}function Y(e){let t=JSON.parse(localStorage.getItem("searchHistory"))||[];console.log(t[e].query),P(),y.value=t[e].query,s.click()}document.getElementById("history-btn").addEventListener("click",function(){console.log("History button clicked"),B()}),document.getElementById("historyTableBody").addEventListener("click",function(e){if(e.target.classList.contains("delete-btn")){const t=e.target.dataset.index;U(t)}if(e.target.classList.contains("hist-load")){const t=e.target.dataset.index;Y(t)}});function P(){document.getElementById("history").classList.remove("show")}document.getElementById("closeHistoryBtn").addEventListener("click",function(){P()});function $(e){console.log("Attempting to get GPS location..."),navigator.geolocation?navigator.geolocation.getCurrentPosition(async function(t){console.log("GPS location acquired successfully.");const n=t.coords.latitude,o=t.coords.longitude;try{const i=`https://api.openweathermap.org/data/2.5/weather?lat=${n}&lon=${o}&appid=${f}`,a=await fetch(i);if(a.ok){const l=(await a.json()).name;console.log("City Name:",l),_(l),p.style.display="none"}else console.error("Error fetching weather data:",a.statusText),d.style.display="block",p.style.display="none"}catch(i){console.error("Error fetching weather data:",i),d.style.display="block",p.style.display="none"}},function(t){console.error("Error getting current position:",t),d.style.display="block",p.style.display="none"}):console.error("Geolocation is not supported by this browser.")}p.style.display="block",$();function V(e,t){const n="https://maps.geoapify.com/v1/staticmap",o=new URLSearchParams({style:"osm-bright",width:420,height:230,center:`lonlat:${t},${e}`,zoom:8,apiKey:u,marker:`lonlat:${t},${e};color:red;size:medium`}),i=`${n}?${o}`;return console.log(i),i}async function _(e){try{const t=await fetch(`${w}&appid=${f}&q=${e}`);t.ok||(d.style.display="block");const n=await t.json();console.log(n),K(n),F(b(n.name),n.main.temp)}catch(t){console.log(t)}}function K(e){g&&clearInterval(g,e.weather[0].main),L.src="",Q(e.name),mapAddr=V(e.coord.lat,e.coord.lon),L.src=mapAddr,console.log(e.timezone);const t=document.querySelector(".weather-icon");t.src=`http://openweathermap.org/img/w/${e.weather[0].icon}.png`,t.alt=e.weather[0].main,g=setInterval(function(){j(e.timezone,e.weather[0].main)},1e3),document.querySelector(".city").textContent=b(e.name),document.querySelector(".temp").textContent=e.main.temp+" °C",document.querySelector(".humidity").textContent=e.main.humidity+"%",document.querySelector(".wind").textContent=e.wind.speed+" km/h",document.querySelector(".max").textContent=e.main.temp_max+" °C",document.querySelector(".min").textContent=e.main.temp_min+" °C",document.querySelector(".weather-icon").textContent=e.weather[0].main,document.querySelector(".pressure").textContent=e.main.pressure+" hPa",document.querySelector(".visibility").textContent=e.visibility+" km",e.main.sea_level!==void 0&&(document.querySelector(".sea-level").textContent=e.main.sea_level+" m"),document.querySelector(".new-weather").textContent=b(e.weather[0].description),document.querySelector(".country").textContent=b(e.sys.country)}function b(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function j(e,t){const n=new Date,o=e*1e3,i=new Date(n.getTime()+o),m=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][i.getUTCDay()];let l=i.getUTCHours(),v=i.getUTCMinutes(),E="";l>=5&&l<12?E="Morning":l>=12&&l<17?E="Afternoon":l>=17&&l<21?E="Evening":E="Night";let O=l>=12?"PM":"AM";l=l%12||12,v=v<10?"0"+v:v;const H=document.getElementById("time"),h=document.getElementById("date");H.textContent=`${l}:${v} ${O}`,h.textContent=`${m} - ${i.toLocaleDateString()}`,document.getElementById("timeOfDay").textContent=`${E}`}var D=document.getElementById("weatherForecast"),C=document.getElementById("weatherForecastWrapper"),T=document.getElementById("loadingIndicator"),I=null,x=0,M=40;function R(){if(!(!I||!I.list)){var e=G(I.list.slice(x,x+M));e.forEach(function(t,n,o){var i=X(n,t,o);D.appendChild(i)}),T.style.display="none"}}function G(e){var t=new Map;return e.forEach(function(n,o){var i=new Date(n.dt*1e3).toLocaleDateString();t.has(i)||t.set(i,[]),t.get(i).push(n)}),t}function X(e,t,n){var o=document.createElement("table");o.classList.add("weather-table");var i=document.createElement("caption");return i.textContent=Z(e,n),o.appendChild(i),t.forEach(function(a){var m=o.insertRow(),l=m.insertCell(),v=m.insertCell(),E=m.insertCell(),O=new Date(a.dt*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});l.textContent=O;var H=a.main.temp+"°C";v.textContent=H;var h=document.createElement("img");a.weather&&a.weather.length>0&&a.weather[0].icon?(h.src="https://openweathermap.org/img/wn/"+a.weather[0].icon+".png",h.alt="Weather Icon",h.title=a.weather[0].description):(h.src="placeholder.png",h.alt="Placeholder Icon"),h.classList.add("weather-icon"),E.appendChild(h);var A=document.createElement("span");A.textContent=a.weather[0].description,E.appendChild(A),m.addEventListener("click",function(){if(m.nextElementSibling&&m.nextElementSibling.classList.contains("weather-details"))m.nextElementSibling.classList.toggle("show"),m.nextElementSibling.classList.toggle("active");else{var N=o.insertRow(m.rowIndex+1);N.classList.add("weather-details","show","active");var q=N.insertCell();q.colSpan=3;var k=document.createElement("div");k.classList.add("weather-details-content"),k.innerHTML=`
                        <div style="display: flex; justify-content: space-between;">
                            <div style="flex: 1;">
                                <p><i class="fas fa-tint"></i> Humidity: ${a.main.humidity}%</p>
                                <p><i class="fas fa-wind"></i> Wind Speed: ${a.wind.speed} m/s</p>
                                <p><i class="fas fa-tachometer-alt"></i> Pressure: ${a.main.pressure} hPa</p>
                            </div>
                            <div style="flex: 1;">
                                <p><i class="fas fa-thermometer-half"></i> Feels Like: ${a.main.feels_like}°C</p>
                                <p><i class="fas fa-thermometer-full"></i> Max Temp: ${a.main.temp_max}°C</p>
                                <p><i class="fas fa-thermometer-empty"></i> Min Temp: ${a.main.temp_min}°C</p>
                            </div>
                        </div>
                    `,q.appendChild(k)}})}),o}function z(){x+=M,R()}function J(){C.scrollHeight-C.scrollTop===C.clientHeight&&(T.style.display="block",z())}C.addEventListener("scroll",J);function Q(e){D.innerHTML="",T.style.display="block";var t=`https://api.openweathermap.org/data/2.5/forecast?appid=${f}&units=metric&q=`+e;fetch(t).then(n=>n.json()).then(n=>{console.log(n),I=n,R()}).catch(n=>console.error("Error fetching weather data:",n))}function Z(e,t){if(t===0)return"Today - "+e;if(t===1)return"Tomorrow - "+e;if(t===2)return"Day after Tomorrow - "+e;var n={weekday:"long",year:"numeric",month:"long",day:"numeric"},o=new Date(e);return o.toLocaleDateString("en-US",n)}});
