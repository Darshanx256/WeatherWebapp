(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))d(l);new MutationObserver(l=>{for(const n of l)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&d(s)}).observe(document,{childList:!0,subtree:!0});function m(l){const n={};return l.integrity&&(n.integrity=l.integrity),l.referrerPolicy&&(n.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?n.credentials="include":l.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function d(l){if(l.ep)return;l.ep=!0;const n=m(l);fetch(l.href,n)}})();document.addEventListener("DOMContentLoaded",function(){const p=document.getElementById("searchInput"),i=document.getElementById("suggestionContainer"),m=document.getElementById("searchButton");let d=0;p.addEventListener("input",function(){const n=this.value.trim().toLowerCase();if(i.innerHTML="",n.length===0){i.style.display="none",d=0;return}const s=new Set;cityData.values.forEach(u=>{u.toLowerCase().startsWith(n)&&s.add(u)});const g=Array.from(s).slice(0,4);if(g.length===0){i.style.display="none",d=-1,document.body.classList.remove("suggestion-open");return}g.forEach((u,w)=>{const h=document.createElement("div");h.textContent=u,h.classList.add("suggestion"),h.addEventListener("click",function(){p.value=u,i.innerHTML="",i.style.display="none",d=-1}),w===d&&h.classList.add("selected"),i.appendChild(h)});const E=p.getBoundingClientRect();i.style.top=E.bottom+window.scrollY+"px",i.style.left=E.left+"px",i.style.width=p.offsetWidth+"px",i.style.display="block"}),p.addEventListener("keydown",function(n){const s=document.querySelectorAll(".suggestion");n.key==="ArrowDown"?(d=Math.min(d+1,s.length-1),l(s)):n.key==="ArrowUp"?(d=Math.max(d-1,-1),l(s)):n.key==="Enter"&&d!==-1?(p.value=s[d].textContent,i.innerHTML="",i.style.display="none",d=-1,m.click()):n.key=="Enter"&&m.click()});function l(n){n.forEach((s,g)=>{g===d?s.classList.add("selected"):s.classList.remove("selected")})}document.addEventListener("click",function(n){!i.contains(n.target)&&n.target!==p&&(i.style.display="none",d=-1)})});console.log({VITE_GEOAPIFY:"2cdf21140e974ba8af8fae8dab9bbbb1",VITE_VISUALCROSSING:"VVM776YWTQ5FJNRX9YRBXLF78",VITE_DISTANCEMATRIX:"6mvxaDxNfMOP5XXheg2F9G59AA0rfq1xxFMsYxmBNdhj1VRh017YZgdvJ2KR0LRB",VITE_OPENWEATHERMAP:"5a088485f78a08fadae18627eec5a98f",VITE_DISTANCEMATRIX_COORDS:"oPRZQuv6wqP1R6IfxUTONtm1lYXB4Ob0W1kH5HHQKX9w9m8u42i39OkyZiujLRMC",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1});const Q="5a088485f78a08fadae18627eec5a98f",Z="2cdf21140e974ba8af8fae8dab9bbbb1",ee=Object.freeze(Object.defineProperty({__proto__:null,GEOAPIFY_KEY:Z,OPENWEATHERMAP_KEY:Q},Symbol.toStringTag,{value:"Module"})),te="modulepreload",ne=function(p,i){return new URL(p,i).href},N={},oe=function(i,m,d){if(!m||m.length===0)return i();const l=document.getElementsByTagName("link");return Promise.all(m.map(n=>{if(n=ne(n,d),n in N)return;N[n]=!0;const s=n.endsWith(".css"),g=s?'[rel="stylesheet"]':"";if(!!d)for(let w=l.length-1;w>=0;w--){const h=l[w];if(h.href===n&&(!s||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${g}`))return;const u=document.createElement("link");if(u.rel=s?"stylesheet":te,s||(u.as="script",u.crossOrigin=""),u.href=n,document.head.appendChild(u),s)return new Promise((w,h)=>{u.addEventListener("load",w),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>i()).catch(n=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=n,window.dispatchEvent(s),!s.defaultPrevented)throw n})};document.addEventListener("DOMContentLoaded",async()=>{let p=null,i=null;try{const m=await oe(()=>Promise.resolve().then(()=>ee),void 0,import.meta.url);p=m.OPENWEATHERMAP_KEY,i=m.GEOAPIFY_KEY}catch(m){console.log("Error importing API key: ",m)}});document.addEventListener("DOMContentLoaded",function(){const p="https://api.openweathermap.org/data/2.5/weather?units=metric",i=document.getElementById("searchInput"),m=document.getElementById("searchButton"),d=document.getElementById("distancecalculator"),l=document.getElementById("gps");var n=document.getElementById("distance-popup");const s=document.getElementById("minimap");var g=document.getElementById("no-network-popup"),E=document.getElementById("loading-popup");let u;m.addEventListener("click",function(){const e=i.value.trim();e&&P(e)}),l.addEventListener("click",function(){M(apiKey)}),d.addEventListener("click",function(){n.innerHTML="",populateDynamicContent();var e=document.createElement("script");e.src="modules/distance/dist.js",document.body.appendChild(e),n.style.display="block",window.scrollBy(0,500)});function w(e,t){let o=JSON.parse(localStorage.getItem("searchHistory"))||[];const r=o.findIndex(c=>c.query===e);r!==-1&&o.splice(r,1);const a=30;o.length>=a&&o.shift(),o.push({query:e,temperature:t}),localStorage.setItem("searchHistory",JSON.stringify(o))}function h(){console.log("showSearchHistory function called");const e=JSON.parse(localStorage.getItem("searchHistory"))||[],t=document.getElementById("historyTableBody");if(t.innerHTML="",e.length===0){const r=document.createElement("tr");r.innerHTML="<td >NO HISTORY</td>",t.appendChild(r)}else for(let r=e.length-1;r>=0;r--){const a=e[r],c=document.createElement("tr");c.innerHTML=`
                    <td>${a.query}</td>
                    <td>${a.temperature}°C</td>
                    <td>
                        <button class="delete-btn" data-index="${r}">x</button>
                        <button class="hist-load" data-index="${r}">LOAD NOW</button>
                    </td>
                `,t.appendChild(c)}const o=document.getElementById("history");o.classList.add("show"),console.log("Search history visibility toggled:",o.classList.contains("show"))}function W(e){let t=JSON.parse(localStorage.getItem("searchHistory"))||[];t.splice(e,1),localStorage.setItem("searchHistory",JSON.stringify(t)),h()}function F(e){let t=JSON.parse(localStorage.getItem("searchHistory"))||[];console.log(t[e].query),H(),i.value=t[e].query,m.click()}document.getElementById("history-btn").addEventListener("click",function(){console.log("History button clicked"),h()}),document.getElementById("historyTableBody").addEventListener("click",function(e){if(e.target.classList.contains("delete-btn")){const t=e.target.dataset.index;W(t)}if(e.target.classList.contains("hist-load")){const t=e.target.dataset.index;F(t)}});function H(){document.getElementById("history").classList.remove("show")}document.getElementById("closeHistoryBtn").addEventListener("click",function(){H()});function M(e){console.log("Attempting to get GPS location..."),navigator.geolocation?navigator.geolocation.getCurrentPosition(async function(t){console.log("GPS location acquired successfully.");const o=t.coords.latitude,r=t.coords.longitude;try{const a=`https://api.openweathermap.org/data/2.5/weather?lat=${o}&lon=${r}&appid=${apiKey}`,c=await fetch(a);if(c.ok){const y=(await c.json()).name;console.log("City Name:",y),P(y),E.style.display="none"}else console.error("Error fetching weather data:",c.statusText),g.style.display="block",E.style.display="none"}catch(a){console.error("Error fetching weather data:",a),g.style.display="block",E.style.display="none"}},function(t){console.error("Error getting current position:",t),g.style.display="block",E.style.display="none"}):console.error("Geolocation is not supported by this browser.")}E.style.display="block",M(apiKey);function K(e,t){const o="https://maps.geoapify.com/v1/staticmap",r=new URLSearchParams({style:"osm-bright",width:420,height:230,center:`lonlat:${t},${e}`,zoom:8,apiKey:geoapiKey,marker:`lonlat:${t},${e};color:red;size:medium`}),a=`${o}?${r}`;return console.log(a),a}async function P(e){try{const t=await fetch(`${p}&appid=${apiKey}&q=${e}`);t.ok||(g.style.display="block");const o=await t.json();console.log(o),U(o),w(C(o.name),o.main.temp)}catch(t){console.log(t)}}function U(e){u&&clearInterval(u,e.weather[0].main),s.src="",z(e.name),mapAddr=K(e.coord.lat,e.coord.lon),s.src=mapAddr,console.log(e.timezone);const t=document.querySelector(".weather-icon");t.src=`http://openweathermap.org/img/w/${e.weather[0].icon}.png`,t.alt=e.weather[0].main,u=setInterval(function(){Y(e.timezone,e.weather[0].main)},1e3),document.querySelector(".city").textContent=C(e.name),document.querySelector(".temp").textContent=e.main.temp+" °C",document.querySelector(".humidity").textContent=e.main.humidity+"%",document.querySelector(".wind").textContent=e.wind.speed+" km/h",document.querySelector(".max").textContent=e.main.temp_max+" °C",document.querySelector(".min").textContent=e.main.temp_min+" °C",document.querySelector(".weather-icon").textContent=e.weather[0].main,document.querySelector(".pressure").textContent=e.main.pressure+" hPa",document.querySelector(".visibility").textContent=e.visibility+" km",e.main.sea_level!==void 0&&(document.querySelector(".sea-level").textContent=e.main.sea_level+" m"),document.querySelector(".new-weather").textContent=C(e.weather[0].description),document.querySelector(".country").textContent=C(e.sys.country)}function C(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function Y(e,t){const o=new Date,r=e*1e3,a=new Date(o.getTime()+r),f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][a.getUTCDay()];let y=a.getUTCHours(),S=a.getUTCMinutes(),L="";y>=5&&y<12?L="Morning":y>=12&&y<17?L="Afternoon":y>=17&&y<21?L="Evening":L="Night";let k=y>=12?"PM":"AM";y=y%12||12,S=S<10?"0"+S:S;const O=document.getElementById("time"),v=document.getElementById("date");O.textContent=`${y}:${S} ${k}`,v.textContent=`${f} - ${a.toLocaleDateString()}`,document.getElementById("timeOfDay").textContent=`${L}`}var D=document.getElementById("weatherForecast"),I=document.getElementById("weatherForecastWrapper"),x=document.getElementById("loadingIndicator"),b=null,T=0,$=40;function A(){if(!(!b||!b.list)){var e=V(b.list.slice(T,T+$));e.forEach(function(t,o,r){var a=j(o,t,r);D.appendChild(a)}),x.style.display="none"}}function V(e){var t=new Map;return e.forEach(function(o,r){var a=new Date(o.dt*1e3).toLocaleDateString();t.has(a)||t.set(a,[]),t.get(a).push(o)}),t}function j(e,t,o){var r=document.createElement("table");r.classList.add("weather-table");var a=document.createElement("caption");return a.textContent=J(e,o),r.appendChild(a),t.forEach(function(c){var f=r.insertRow(),y=f.insertCell(),S=f.insertCell(),L=f.insertCell(),k=new Date(c.dt*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});y.textContent=k;var O=c.main.temp+"°C";S.textContent=O;var v=document.createElement("img");c.weather&&c.weather.length>0&&c.weather[0].icon?(v.src="https://openweathermap.org/img/wn/"+c.weather[0].icon+".png",v.alt="Weather Icon",v.title=c.weather[0].description):(v.src="placeholder.png",v.alt="Placeholder Icon"),v.classList.add("weather-icon"),L.appendChild(v);var _=document.createElement("span");_.textContent=c.weather[0].description,L.appendChild(_),f.addEventListener("click",function(){if(f.nextElementSibling&&f.nextElementSibling.classList.contains("weather-details"))f.nextElementSibling.classList.toggle("show"),f.nextElementSibling.classList.toggle("active");else{var R=r.insertRow(f.rowIndex+1);R.classList.add("weather-details","show","active");var q=R.insertCell();q.colSpan=3;var B=document.createElement("div");B.classList.add("weather-details-content"),B.innerHTML=`
                        <div style="display: flex; justify-content: space-between;">
                            <div style="flex: 1;">
                                <p><i class="fas fa-tint"></i> Humidity: ${c.main.humidity}%</p>
                                <p><i class="fas fa-wind"></i> Wind Speed: ${c.wind.speed} m/s</p>
                                <p><i class="fas fa-tachometer-alt"></i> Pressure: ${c.main.pressure} hPa</p>
                            </div>
                            <div style="flex: 1;">
                                <p><i class="fas fa-thermometer-half"></i> Feels Like: ${c.main.feels_like}°C</p>
                                <p><i class="fas fa-thermometer-full"></i> Max Temp: ${c.main.temp_max}°C</p>
                                <p><i class="fas fa-thermometer-empty"></i> Min Temp: ${c.main.temp_min}°C</p>
                            </div>
                        </div>
                    `,q.appendChild(B)}})}),r}function G(){T+=$,A()}function X(){I.scrollHeight-I.scrollTop===I.clientHeight&&(x.style.display="block",G())}I.addEventListener("scroll",X);function z(e){D.innerHTML="",x.style.display="block";var t=`https://api.openweathermap.org/data/2.5/forecast?appid=${apiKey}&units=metric&q=`+e;fetch(t).then(o=>o.json()).then(o=>{console.log(o),b=o,A()}).catch(o=>console.error("Error fetching weather data:",o))}function J(e,t){if(t===0)return"Today - "+e;if(t===1)return"Tomorrow - "+e;if(t===2)return"Day after Tomorrow - "+e;var o={weekday:"long",year:"numeric",month:"long",day:"numeric"},r=new Date(e);return r.toLocaleDateString("en-US",o)}});
