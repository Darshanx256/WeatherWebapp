(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))d(c);new MutationObserver(c=>{for(const n of c)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&d(s)}).observe(document,{childList:!0,subtree:!0});function g(c){const n={};return c.integrity&&(n.integrity=c.integrity),c.referrerPolicy&&(n.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?n.credentials="include":c.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function d(c){if(c.ep)return;c.ep=!0;const n=g(c);fetch(c.href,n)}})();document.addEventListener("DOMContentLoaded",function(){const m=document.getElementById("searchInput"),i=document.getElementById("suggestionContainer"),g=document.getElementById("searchButton");let d=0;m.addEventListener("input",function(){const n=this.value.trim().toLowerCase();if(i.innerHTML="",n.length===0){i.style.display="none",d=0;return}const s=new Set;cityData.values.forEach(u=>{u.toLowerCase().startsWith(n)&&s.add(u)});const E=Array.from(s).slice(0,4);if(E.length===0){i.style.display="none",d=-1,document.body.classList.remove("suggestion-open");return}E.forEach((u,h)=>{const f=document.createElement("div");f.textContent=u,f.classList.add("suggestion"),f.addEventListener("click",function(){m.value=u,i.innerHTML="",i.style.display="none",d=-1}),h===d&&f.classList.add("selected"),i.appendChild(f)});const S=m.getBoundingClientRect();i.style.top=S.bottom+window.scrollY+"px",i.style.left=S.left+"px",i.style.width=m.offsetWidth+"px",i.style.display="block"}),m.addEventListener("keydown",function(n){const s=document.querySelectorAll(".suggestion");n.key==="ArrowDown"?(d=Math.min(d+1,s.length-1),c(s)):n.key==="ArrowUp"?(d=Math.max(d-1,-1),c(s)):n.key==="Enter"&&d!==-1?(m.value=s[d].textContent,i.innerHTML="",i.style.display="none",d=-1,g.click()):n.key=="Enter"&&g.click()});function c(n){n.forEach((s,E)=>{E===d?s.classList.add("selected"):s.classList.remove("selected")})}document.addEventListener("click",function(n){!i.contains(n.target)&&n.target!==m&&(i.style.display="none",d=-1)})});console.log({VITE_GEOAPIFY:"2cdf21140e974ba8af8fae8dab9bbbb1",VITE_VISUALCROSSING:"VVM776YWTQ5FJNRX9YRBXLF78",VITE_DISTANCEMATRIX:"6mvxaDxNfMOP5XXheg2F9G59AA0rfq1xxFMsYxmBNdhj1VRh017YZgdvJ2KR0LRB",VITE_OPENWEATHERMAP:"5a088485f78a08fadae18627eec5a98f",VITE_DISTANCEMATRIX_COORDS:"oPRZQuv6wqP1R6IfxUTONtm1lYXB4Ob0W1kH5HHQKX9w9m8u42i39OkyZiujLRMC",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1});const ee="5a088485f78a08fadae18627eec5a98f",te="2cdf21140e974ba8af8fae8dab9bbbb1",ne=Object.freeze(Object.defineProperty({__proto__:null,GEOAPIFY_KEY:te,OPENWEATHERMAP_KEY:ee},Symbol.toStringTag,{value:"Module"})),oe="modulepreload",re=function(m,i){return new URL(m,i).href},W={},ie=function(i,g,d){if(!g||g.length===0)return i();const c=document.getElementsByTagName("link");return Promise.all(g.map(n=>{if(n=re(n,d),n in W)return;W[n]=!0;const s=n.endsWith(".css"),E=s?'[rel="stylesheet"]':"";if(!!d)for(let h=c.length-1;h>=0;h--){const f=c[h];if(f.href===n&&(!s||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${E}`))return;const u=document.createElement("link");if(u.rel=s?"stylesheet":oe,s||(u.as="script",u.crossOrigin=""),u.href=n,document.head.appendChild(u),s)return new Promise((h,f)=>{u.addEventListener("load",h),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>i()).catch(n=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=n,window.dispatchEvent(s),!s.defaultPrevented)throw n})};document.addEventListener("DOMContentLoaded",async()=>{let m="5a088485f78a08fadae18627eec5a98f",i="2cdf21140e974ba8af8fae8dab9bbbb1";try{const e=await ie(()=>Promise.resolve().then(()=>ne),void 0,import.meta.url);m=e.OPENWEATHERMAP_KEY,i=e.GEOAPIFY_KEY}catch(e){console.log("Error importing API key: ",e)}const g="https://api.openweathermap.org/data/2.5/weather?units=metric",d=document.getElementById("searchInput"),c=document.getElementById("searchButton"),n=document.getElementById("distancecalculator"),s=document.getElementById("gps");var E=document.getElementById("distance-popup");const S=document.getElementById("minimap");var u=document.getElementById("no-network-popup"),h=document.getElementById("loading-popup");let f;c.addEventListener("click",function(){const e=d.value.trim();e&&D(e)}),s.addEventListener("click",function(){M()}),n.addEventListener("click",function(){E.innerHTML="",populateDynamicContent();var e=document.createElement("script");e.src="modules/distance/dist.js",document.body.appendChild(e),E.style.display="block",window.scrollBy(0,500)});function F(e,t){let o=JSON.parse(localStorage.getItem("searchHistory"))||[];const r=o.findIndex(l=>l.query===e);r!==-1&&o.splice(r,1);const a=30;o.length>=a&&o.shift(),o.push({query:e,temperature:t}),localStorage.setItem("searchHistory",JSON.stringify(o))}function O(){console.log("showSearchHistory function called");const e=JSON.parse(localStorage.getItem("searchHistory"))||[],t=document.getElementById("historyTableBody");if(t.innerHTML="",e.length===0){const r=document.createElement("tr");r.innerHTML="<td >NO HISTORY</td>",t.appendChild(r)}else for(let r=e.length-1;r>=0;r--){const a=e[r],l=document.createElement("tr");l.innerHTML=`
                    <td>${a.query}</td>
                    <td>${a.temperature}°C</td>
                    <td>
                        <button class="delete-btn" data-index="${r}">x</button>
                        <button class="hist-load" data-index="${r}">LOAD NOW</button>
                    </td>
                `,t.appendChild(l)}const o=document.getElementById("history");o.classList.add("show"),console.log("Search history visibility toggled:",o.classList.contains("show"))}function U(e){let t=JSON.parse(localStorage.getItem("searchHistory"))||[];t.splice(e,1),localStorage.setItem("searchHistory",JSON.stringify(t)),O()}function Y(e){let t=JSON.parse(localStorage.getItem("searchHistory"))||[];console.log(t[e].query),P(),d.value=t[e].query,c.click()}document.getElementById("history-btn").addEventListener("click",function(){console.log("History button clicked"),O()}),document.getElementById("historyTableBody").addEventListener("click",function(e){if(e.target.classList.contains("delete-btn")){const t=e.target.dataset.index;U(t)}if(e.target.classList.contains("hist-load")){const t=e.target.dataset.index;Y(t)}});function P(){document.getElementById("history").classList.remove("show")}document.getElementById("closeHistoryBtn").addEventListener("click",function(){P()});function M(e){console.log("Attempting to get GPS location..."),navigator.geolocation?navigator.geolocation.getCurrentPosition(async function(t){console.log("GPS location acquired successfully.");const o=t.coords.latitude,r=t.coords.longitude;try{const a=`https://api.openweathermap.org/data/2.5/weather?lat=${o}&lon=${r}&appid=${m}`,l=await fetch(a);if(l.ok){const p=(await l.json()).name;console.log("City Name:",p),D(p),h.style.display="none"}else console.error("Error fetching weather data:",l.statusText),u.style.display="block",h.style.display="none"}catch(a){console.error("Error fetching weather data:",a),u.style.display="block",h.style.display="none"}},function(t){console.error("Error getting current position:",t),u.style.display="block",h.style.display="none"}):console.error("Geolocation is not supported by this browser.")}h.style.display="block",M();function V(e,t){const o="https://maps.geoapify.com/v1/staticmap",r=new URLSearchParams({style:"osm-bright",width:420,height:230,center:`lonlat:${t},${e}`,zoom:8,apiKey:i,marker:`lonlat:${t},${e};color:red;size:medium`}),a=`${o}?${r}`;return console.log(a),a}async function D(e){try{const t=await fetch(`${g}&appid=${m}&q=${e}`);t.ok||(u.style.display="block");const o=await t.json();console.log(o),K(o),F(C(o.name),o.main.temp)}catch(t){console.log(t)}}function K(e){f&&clearInterval(f,e.weather[0].main),S.src="",Q(e.name),mapAddr=V(e.coord.lat,e.coord.lon),S.src=mapAddr,console.log(e.timezone);const t=document.querySelector(".weather-icon");t.src=`http://openweathermap.org/img/w/${e.weather[0].icon}.png`,t.alt=e.weather[0].main,f=setInterval(function(){j(e.timezone,e.weather[0].main)},1e3),document.querySelector(".city").textContent=C(e.name),document.querySelector(".temp").textContent=e.main.temp+" °C",document.querySelector(".humidity").textContent=e.main.humidity+"%",document.querySelector(".wind").textContent=e.wind.speed+" km/h",document.querySelector(".max").textContent=e.main.temp_max+" °C",document.querySelector(".min").textContent=e.main.temp_min+" °C",document.querySelector(".weather-icon").textContent=e.weather[0].main,document.querySelector(".pressure").textContent=e.main.pressure+" hPa",document.querySelector(".visibility").textContent=e.visibility+" km",e.main.sea_level!==void 0&&(document.querySelector(".sea-level").textContent=e.main.sea_level+" m"),document.querySelector(".new-weather").textContent=C(e.weather[0].description),document.querySelector(".country").textContent=C(e.sys.country)}function C(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function j(e,t){const o=new Date,r=e*1e3,a=new Date(o.getTime()+r),y=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][a.getUTCDay()];let p=a.getUTCHours(),L=a.getUTCMinutes(),v="";p>=5&&p<12?v="Morning":p>=12&&p<17?v="Afternoon":p>=17&&p<21?v="Evening":v="Night";let k=p>=12?"PM":"AM";p=p%12||12,L=L<10?"0"+L:L;const B=document.getElementById("time"),w=document.getElementById("date");B.textContent=`${p}:${L} ${k}`,w.textContent=`${y} - ${a.toLocaleDateString()}`,document.getElementById("timeOfDay").textContent=`${v}`}var $=document.getElementById("weatherForecast"),b=document.getElementById("weatherForecastWrapper"),x=document.getElementById("loadingIndicator"),I=null,T=0,A=40;function _(){if(!(!I||!I.list)){var e=G(I.list.slice(T,T+A));e.forEach(function(t,o,r){var a=X(o,t,r);$.appendChild(a)}),x.style.display="none"}}function G(e){var t=new Map;return e.forEach(function(o,r){var a=new Date(o.dt*1e3).toLocaleDateString();t.has(a)||t.set(a,[]),t.get(a).push(o)}),t}function X(e,t,o){var r=document.createElement("table");r.classList.add("weather-table");var a=document.createElement("caption");return a.textContent=Z(e,o),r.appendChild(a),t.forEach(function(l){var y=r.insertRow(),p=y.insertCell(),L=y.insertCell(),v=y.insertCell(),k=new Date(l.dt*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});p.textContent=k;var B=l.main.temp+"°C";L.textContent=B;var w=document.createElement("img");l.weather&&l.weather.length>0&&l.weather[0].icon?(w.src="https://openweathermap.org/img/wn/"+l.weather[0].icon+".png",w.alt="Weather Icon",w.title=l.weather[0].description):(w.src="placeholder.png",w.alt="Placeholder Icon"),w.classList.add("weather-icon"),v.appendChild(w);var R=document.createElement("span");R.textContent=l.weather[0].description,v.appendChild(R),y.addEventListener("click",function(){if(y.nextElementSibling&&y.nextElementSibling.classList.contains("weather-details"))y.nextElementSibling.classList.toggle("show"),y.nextElementSibling.classList.toggle("active");else{var q=r.insertRow(y.rowIndex+1);q.classList.add("weather-details","show","active");var N=q.insertCell();N.colSpan=3;var H=document.createElement("div");H.classList.add("weather-details-content"),H.innerHTML=`
                        <div style="display: flex; justify-content: space-between;">
                            <div style="flex: 1;">
                                <p><i class="fas fa-tint"></i> Humidity: ${l.main.humidity}%</p>
                                <p><i class="fas fa-wind"></i> Wind Speed: ${l.wind.speed} m/s</p>
                                <p><i class="fas fa-tachometer-alt"></i> Pressure: ${l.main.pressure} hPa</p>
                            </div>
                            <div style="flex: 1;">
                                <p><i class="fas fa-thermometer-half"></i> Feels Like: ${l.main.feels_like}°C</p>
                                <p><i class="fas fa-thermometer-full"></i> Max Temp: ${l.main.temp_max}°C</p>
                                <p><i class="fas fa-thermometer-empty"></i> Min Temp: ${l.main.temp_min}°C</p>
                            </div>
                        </div>
                    `,N.appendChild(H)}})}),r}function z(){T+=A,_()}function J(){b.scrollHeight-b.scrollTop===b.clientHeight&&(x.style.display="block",z())}b.addEventListener("scroll",J);function Q(e){$.innerHTML="",x.style.display="block";var t=`https://api.openweathermap.org/data/2.5/forecast?appid=${m}&units=metric&q=`+e;fetch(t).then(o=>o.json()).then(o=>{console.log(o),I=o,_()}).catch(o=>console.error("Error fetching weather data:",o))}function Z(e,t){if(t===0)return"Today - "+e;if(t===1)return"Tomorrow - "+e;if(t===2)return"Day after Tomorrow - "+e;var o={weekday:"long",year:"numeric",month:"long",day:"numeric"},r=new Date(e);return r.toLocaleDateString("en-US",o)}});
